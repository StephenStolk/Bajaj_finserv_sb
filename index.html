<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Array Processor</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 min-h-screen flex items-center justify-center">
  <div class="bg-white shadow-xl rounded-2xl p-8 w-full max-w-2xl">
    <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">Array Processor</h2>

    
    <div class="mb-6">
      <h3 class="text-lg font-semibold text-gray-700 mb-2">Option 1: Enter values (comma-separated)</h3>

      <div class="flex gap-2">
        <input id="inputData" type="text" placeholder='a,1,334,4,R,$'
               class="flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
        <button onclick="sendCommaSeparated()"
                class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
          Submit
        </button>
      </div>
    </div>

    <div class="text-center text-gray-500 mb-6">OR</div>

    
    <div class="mb-6">
      <h3 class="text-lg font-semibold text-gray-700 mb-2">Option 2: Enter values separately</h3>
      <div id="fields" class="space-y-2 mb-3"></div>
      <div class="flex gap-2">
        <button onclick="addField()" class="bg-gray-600 text-white px-3 py-2 rounded-lg hover:bg-gray-700">

          Add Field
        </button>
        <button onclick="sendSeparateFields()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">

          Submit
        </button>
      </div>
    </div>

 
    <div>
      <h3 class="text-lg font-semibold text-gray-700 mb-2">Response</h3>
      <pre id="output" class="bg-gray-900 text-green-400 text-sm rounded-lg p-4 overflow-x-auto">

      </pre>
    </div>
  </div>

  <script>
    function addField() {
      const div = document.createElement("div")
      div.innerHTML = `<input type="text" placeholder="Enter value"
        class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">`

      document.getElementById("fields").appendChild(div)
    }

    async function sendCommaSeparated() {
      const raw = document.getElementById("inputData").value
      const data = raw.split(",").map(v => v.trim()).filter(v => v !== "")
      await sendRequest(data)
    }

    async function sendSeparateFields() {
      const inputs = document.querySelectorAll("#fields input")
      const data = []

      inputs.forEach(input => {
        if (input.value.trim() !== "") 
        
        data.push(input.value.trim())
      })
      await sendRequest(data)
    }

    async function sendRequest(data) {
      try {
        const res = await fetch("http://localhost:3000/bfhl", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ data })
        })

        const result = await res.json()
        document.getElementById("output").textContent = JSON.stringify(result, null, 2)

      } catch (err) {
        document.getElementById("output").textContent = " Error connecting too"
      }
    }

  </script>
</body>
</html>
